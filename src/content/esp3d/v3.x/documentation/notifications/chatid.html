<!DOCTYPE html>
<html>

<head>
    <title>Get your chat Id</title>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#get-id-form").submit(function (event) {
                event.preventDefault();
                var token = $("#bot-token").val();
                var apiUrl = "https://api.telegram.org/bot" + token + "/getUpdates?offset=-1";
                $.getJSON(apiUrl, function (data) {
                    var chatId = data.result[0].message.chat.id;
                    $("#result").text(chatId);
                });
            });
            $("#copy-chat-id").click(function () {
                var chatId = $("#result").text();
                var dummy = document.createElement('input');
                document.body.appendChild(dummy);
                dummy.value = chatId;
                dummy.select();
                document.execCommand('copy');
                document.body.removeChild(dummy);
            });
            $("#copy-code").click(function () {
                var code = $("#random-code").text();
                var dummy = document.createElement('input');
                document.body.appendChild(dummy);
                dummy.value = code;
                dummy.select();
                document.execCommand('copy');
                document.body.removeChild(dummy);
            });
            function generateCode() {
                var code = "";
                var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
                for (var i = 0; i < 6; i++) {
                    code += possible.charAt(Math.floor(Math.random() * possible.length));
                }
                $("#random-code").text(code);
            }
            generateCode();
        });
    </script>
</head>

<body>
    <div class="container">
        <h2>Get Chat Id</h2>
        <br />
        <br />
        <br />
        <div class="form-group">
            <label for="random-code">1. Post this code into your bot's window</label>
            <h2 class="text-primary" id="random-code"></h2>
            <button type="button" class="btn btn-primary" id="copy-code">Copy to Clipboard</button>
        </div>
        <br />
        <br />
        <form id="get-id-form">
            <div class="form-group">
                <label for="bot-token">2. Insert your Bot's token</label>
                <input type="text" class="form-control" id="bot-token" placeholder="Enter your Bot's token">
            </div>
            <div class="form-group">
                <button type="submit" class="btn btn-primary">Get Chat Id</button>
            </div>
        </form>
        <br />
        <br />
        <div class="form-group">
            <label for="result">Your chat Id:</label>
            <div class="well" id="result"></div>
            <button type="button" class="btn btn-primary" id="copy-chat-id">Copy to Clipboard</button>
        </div>

    </div>
</body>

</html>